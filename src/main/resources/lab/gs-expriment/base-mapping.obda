[PrefixDeclaration]
:			http://www.hdruk.ac.uk/sprint/graph/
onto:		http://www.hdruk.ac.uk/sprint/graph/ontology/
owl:		http://www.w3.org/2002/07/owl#
rdf:		http://www.w3.org/1999/02/22-rdf-syntax-ns#
xml:		http://www.w3.org/XML/1998/namespace
xsd:		http://www.w3.org/2001/XMLSchema#
obda:		https://w3id.org/obda/vocabulary#
rdfs:		http://www.w3.org/2000/01/rdf-schema#
bnf: 		http://www.hdruk.ac.uk/sprint/graph/ontology/bnf/
snomed: 	http://www.hdruk.ac.uk/sprint/graph/ontology/snomed/
icd10:      http://www.hdruk.ac.uk/sprint/graph/ontology/ICD10/

[MappingDeclaration] @collection [[
mappingId	conditions
target		:patient/{id} a onto:Patient ; a icd10:{c1} ; onto:hasDiag :diag/{id}_{cleanCondition}_{dt1}; onto:hasICD10Code {c1} . :diag/{id}_{cleanCondition}_{dt1} a onto:ICD/{c1}; onto:hasCondition onto:ICD/{c1} ; onto:admissionDate {dt1}.
source		select *, replace(replace(c1, ' ', ''), '-', 'icd9_') cleanCondition from smr.smr01

mappingId	druguse
target		:patient/{CHI} onto:hasPrescription :prescription/{CHI}_{PrescribedDate} . :prescription/{CHI}_{PrescribedDate}_{BnfCode} a bnf:{BnfCode}; onto:prescribedDrug :drug/{BnfCode} ; onto:prescribedDate {PrescribedDate} . :drug/{BnfCode} onto:drugName {Name} .
source		select id CHI, drug Name, dt PrescribedDate, bnf BnfCode from presc.presc_all

]]

